<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>銘峰輪胎 促銷快查</title>
  <style>
    body {
      background: #0a0f13;
      color: #e9f0f6;
      font-family: 'Noto Sans TC', sans-serif;
      margin: 0;
      padding: 20px;
    }
    .wrap { max-width: 960px; margin: auto; }
    h1 { font-size: 28px; font-weight: 900; margin-bottom: 0; }
    .beta { background: #ffd233; color: #111; font-weight: bold; padding: 2px 8px; border-radius: 8px; font-size: 14px; }
    .card {
      background: #121821;
      border-radius: 16px;
      padding: 16px;
      margin-top: 16px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    label { font-size: 14px; color: #b9c7d4; display: block; margin-bottom: 4px; }
    input, select {
      background: #0f151d;
      color: #fff;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 10px;
      width: 100%;
      margin-bottom: 8px;
    }
    button {
      border: none;
      border-radius: 10px;
      padding: 10px 16px;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-yellow { background: #ffd233; color: #111; }
    .btn-gray { background: #1b2532; color: #e9f0f6; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
      font-size: 14px;
    }
    th, td { padding: 10px; border-top: 1px solid rgba(255,255,255,0.1); }
    th { color: #b9c7d4; text-align: left; background: #111722; }
    .pill { padding: 4px 8px; border-radius: 999px; font-weight: bold; font-size: 12px; display: inline-block; }
    .ok { background: rgba(46,204,113,0.15); color: #2ecc71; border: 1px solid rgba(46,204,113,0.4); }
    .no { background: rgba(255,107,107,0.15); color: #ff6b6b; border: 1px solid rgba(255,107,107,0.4); }
    footer { margin-top: 20px; font-size: 12px; color: #8aa1b1; text-align: center; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>銘峰輪胎 促銷快查 <span class="beta">Beta</span></h1>
    <div class="card">
      <label>直接輸入尺寸（例如：205/55R16 或 225/45R18）</label>
      <input id="sizeInput" placeholder="例：205/55R16 91V 或 225/45R18" />
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;">
        <select id="selWidth"><option value="">全部</option></select>
        <select id="selAspect"><option value="">全部</option></select>
        <select id="selRim"><option value="">全部</option></select>
        <select id="selBrand"><option value="">全部</option></select>
        <select id="selPattern"><option value="">全部</option></select>
        <button class="btn-yellow" id="btnSearch">查詢</button>
        <button class="btn-gray" id="btnReset">清除</button>
        <label class="btn-gray" for="csvFile" style="cursor:pointer;">匯入 CSV</label>
        <input id="csvFile" type="file" accept=".csv" hidden />
      </div>
    </div>

    <div class="card">
      <table id="resultTable">
        <thead>
          <tr>
            <th>品牌</th>
            <th>花紋/型號</th>
            <th>尺寸</th>
            <th>負載/速度</th>
            <th>促銷</th>
            <th>備註</th>
          </tr>
        </thead>
        <tbody id="resultBody"></tbody>
      </table>
    </div>

    <footer>© 銘峰輪業 ｜ Demo 版本，實際促銷以門市公告為準。</footer>
  </div>

  <script>
  let promos = [
    { brand: 'Continental', pattern: 'UC6', width: 205, aspect: 55, rim: 16, load: '91', speed: 'V', onPromo: true, note: '四入價；登錄贈品' },
    { brand: 'Continental', pattern: 'CC6', width: 195, aspect: 65, rim: 15, load: '91', speed: 'H', onPromo: true, note: '熱門促銷' },
    { brand: 'Continental', pattern: 'SportContact 6', width: 255, aspect: 35, rim: 19, load: '96', speed: 'Y', onPromo: false, note: '限量到貨' },
    { brand: 'Maxxis', pattern: 'HP5', width: 205, aspect: 55, rim: 16, load: '91', speed: 'V', onPromo: true, note: '' },
    { brand: 'Michelin', pattern: 'Pilot Sport 4', width: 225, aspect: 45, rim: 18, load: '95', speed: 'W', onPromo: true, note: '登錄送禮' },
    { brand: 'Bridgestone', pattern: 'Turanza T005A', width: 215, aspect: 55, rim: 17, load: '94', speed: 'V', onPromo: false, note: '' },
    { brand: 'Nexen', pattern: "N'Fera SU1", width: 205, aspect: 50, rim: 17, load: '93', speed: 'W', onPromo: true, note: '二入小折' },
  ];

  const $ = s => document.querySelector(s);

  function populateFilters() {
    const widths  = [...new Set(promos.map(p => p.width))].sort((a,b)=>a-b);
    const aspects = [...new Set(promos.map(p => p.aspect))].sort((a,b)=>a-b);
    const rims    = [...new Set(promos.map(p => p.rim))].sort((a,b)=>a-b);
    const brands  = [...new Set(promos.map(p => p.brand))].sort();
    const patterns= [...new Set(promos.map(p => p.pattern))].sort();

    fillOptions('#selWidth', widths);
    fillOptions('#selAspect', aspects);
    fillOptions('#selRim', rims);
    fillOptions('#selBrand', brands);
    fillOptions('#selPattern', patterns);
  }

  function fillOptions(sel, arr) {
    const el = $(sel);
    arr.forEach(v => {
      const opt = document.createElement('option');
      opt.value = v;
      opt.textContent = v;
      el.appendChild(opt);
    });
  }

  function render(rows) {
    const body = $('#resultBody');
    body.innerHTML = '';
    if (!rows.length) {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td colspan="6" style="color:#b9c7d4;">查無符合條件的資料</td>`;
      body.appendChild(tr);
      return;
    }
    rows.forEach(r => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${r.brand}</td>
        <td>${r.pattern}</td>
        <td>${r.width}/${r.aspect}R${r.rim}</td>
        <td>${r.load || ''}${r.speed || ''}</td>
        <td>${r.onPromo ? '<span class="pill ok">促銷中</span>' : '<span class="pill no">暫無</span>'}</td>
        <td>${r.note || ''}</td>`;
      body.appendChild(tr);
    });
  }

  function search() {
    const w = $('#selWidth').value;
    const a = $('#selAspect').value;
    const r = $('#selRim').value;
    const b = $('#selBrand').value;
    const p = $('#selPattern').value;
    const s = $('#sizeInput').value.trim();

    let filtered = promos;
    if (w) filtered = filtered.filter(x => x.width == w);
    if (a) filtered = filtered.filter(x => x.aspect == a);
    if (r) filtered = filtered.filter(x => x.rim == r);
    if (b) filtered = filtered.filter(x => x.brand == b);
    if (p) filtered = filtered.filter(x => x.pattern == p);
    if (s) {
      const nums = s.match(/\d+/g);
      if (nums && nums.length >= 2) {
        filtered = filtered.filter(x => String(x.width).includes(nums[0]) && String(x.aspect).includes(nums[1]));
      }
    }
    render(filtered);
  }

  $('#btnSearch').addEventListener('click', search);
  $('#btnReset').addEventListener('click', () => render(promos));

  populateFilters();
  render(promos);
  </script>
</body>
</html>
